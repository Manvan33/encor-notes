<!DOCTYPE html>
<html><head>
			
		<title>2.2 - Data path virtualization</title>
		<base href="./">
		<meta id="root-path" root-path="./">

		<link rel="icon" sizes="96x96" href="https://publish-01.obsidian.md/access/f786db9fac45774fa4f0d8112e232d67/favicon-96x96.png">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0">
		<meta charset="UTF-8">
		

			<link rel="stylesheet" href="lib/styles/obsidian-styles.css">
			<link rel="stylesheet" href="lib/styles/theme.css">
			<link rel="stylesheet" href="lib/styles/plugin-styles.css">
			<link rel="stylesheet" href="lib/styles/snippets.css">
			<link rel="stylesheet" href="lib/styles/generated-styles.css">
			<style> body.css-settings-manager { } body.theme-light.css-settings-manager { } body.theme-dark.css-settings-manager { } </style>

			
<script src="lib/scripts/webpage.js"></script>

<script src="lib/scripts/generated.js"></script>

			</head><body class="mod-macos native-scrollbars show-inline-title theme-light ctp-mocha ctp-full-palette loading "><div class="webpage-container"><div class="sidebar-left sidebar"><div class="sidebar-container"><div class="sidebar-sizer"><div class="sidebar-content-positioner"><div class="sidebar-content"><div><label class="theme-toggle-container" for="theme_toggle"><input class="theme-toggle-input" type="checkbox" id="theme_toggle"><div class="toggle-background"></div></label></div><div class="tree-container file-tree mod-nav-indicator" data-depth="0"><div class="tree-header"><span class="sidebar-section-header">ENCOR</span><button class="clickable-icon collapse-tree-button is-collapsed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-scroll-area"><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="1.1-enterprise-network-architecture.html"><span class="tree-item-title">1.1 - Enterprise Network Architecture</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="1.1b-high-availability.html"><span class="tree-item-title">1.1b - High availability</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="1.2-wlan.html"><span class="tree-item-title">1.2 - WLAN</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="1.4-sd-wan.html"><span class="tree-item-title">1.4 - SD-WAN</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="1.5-sd-access.html"><span class="tree-item-title">1.5 - SD-Access</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="1.6-qos.html"><span class="tree-item-title">1.6 - QoS</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="1.7-switching.html"><span class="tree-item-title">1.7 - Switching</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="2.1-device-virtualization.html"><span class="tree-item-title">2.1 - Device virtualization</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="2.2-data-path-virtualization.html"><span class="tree-item-title">2.2 - Data path virtualization</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="2.3-lisp-and-vxlan.html"><span class="tree-item-title">2.3 - LISP and VXLAN</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="3.1.a-troubleshoot-802.1q-trunking-protocols.html"><span class="tree-item-title">3.1.a - Troubleshoot 802.1q trunking protocols</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="3.1b-troubleshooting-etherchannel.html"><span class="tree-item-title">3.1b - Troubleshooting Etherchannel</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="3.1c-stp.html"><span class="tree-item-title">3.1c - STP</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="3.2.a-layer-3-compare-routing-protocols.html"><span class="tree-item-title">3.2.a - Layer 3 - compare routing protocols</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="3.2.b-ospf.html"><span class="tree-item-title">3.2.b - OSPF</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="3.2.c-ebgp.html"><span class="tree-item-title">3.2.c - eBGP</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="3.3.a-wireless-layer-1.html"><span class="tree-item-title">3.3.a - Wireless layer 1</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="3.3.b-aps-and-antennas.html"><span class="tree-item-title">3.3.b - APs and antennas</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="3.3.c-connect-and-roam.html"><span class="tree-item-title">3.3.c - Connect and roam</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="3.4.a-ntp.html"><span class="tree-item-title">3.4.a - NTP</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="3.4.d-multicast.html"><span class="tree-item-title">3.4.d - Multicast</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="4.1-troubleshooting,-syslog-and-snmp.html"><span class="tree-item-title">4.1 - Troubleshooting, Syslog and SNMP</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="4.2-netflow.html"><span class="tree-item-title">4.2 - Netflow</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="4.3-span,-rspan,-erspan.html"><span class="tree-item-title">4.3 - SPAN, RSPAN, ERSPAN</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="4.4-ip-sla.html"><span class="tree-item-title">4.4 - IP SLA</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="5.1-access-control.html"><span class="tree-item-title">5.1 - Access control</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="5.2-acls-and-copp.html"><span class="tree-item-title">5.2 - ACLs and CoPP</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="5.2b-copp-control-plane-policing.html"><span class="tree-item-title">5.2b - CoPP - Control Plane Policing</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="5.3-rest-apis-security.html"><span class="tree-item-title">5.3 - REST APIs Security</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="5.5.0-threat-landscape.html"><span class="tree-item-title">5.5.0 - Threat Landscape</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="5.5.1-threat-defense.html"><span class="tree-item-title">5.5.1 - Threat defense</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="5.5.c-firewall.html"><span class="tree-item-title">5.5.c - Firewall</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="5.5.d-trustsec-and-macsec.html"><span class="tree-item-title">5.5.d - TrustSec and MACSec</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="5.5.e-nac-with-802.1x.html"><span class="tree-item-title">5.5.e - NAC with 802.1X</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="6.0-automation.html"><span class="tree-item-title">6.0 - Automation</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="6.4-dna-center.html"><span class="tree-item-title">6.4 - DNA Center</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="6.6-eem.html"><span class="tree-item-title">6.6 - EEM</span></a></div><div class="tree-item-children"></div></div></div></div></div></div></div></div><div class="sidebar-gutter"><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div></div><div class="document-container show"><div class="markdown-preview-view markdown-rendered node-insert-event is-readable-line-width allow-fold-headings show-indentation-guide allow-fold-lists show-properties" tabindex="-1" style="tab-size: 4;"><style id="MJX-CHTML-styles"></style><div class="markdown-preview-sizer markdown-preview-section" style="min-height: 2726px;"><div class="markdown-preview-pusher" style="width: 1px; height: 0.1px; margin-bottom: 0px;"></div><div class="mod-header"><div class="inline-title" data-heading="2.2 - Data path virtualization" id="2.2_-_Data_path_virtualization" style="display: block;">2.2 - Data path virtualization</div></div><div><p>The architecture of network virtualization has three main components: access control, path isolation, and services edge.</p></div><div><p><span alt="Pasted image 20230822134608.png" src="assets/pasted-image-20230822134608.png" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20230822134608.png" src="assets/pasted-image-20230822134608.png"></span></p></div><div class="heading-wrapper"><h2 data-heading="Path Isolation" class="heading" id="Path_Isolation"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width: 24px; max-width: 100%;"><path d="M3 8L12 17L21 8"></path></svg></div>Path Isolation<div class="heading-after">...</div></h2><div class="heading-children"><div class="heading-wrapper"><h3 data-heading="Device virtualization" class="heading" id="Device_virtualization"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width: 24px; max-width: 100%;"><path d="M3 8L12 17L21 8"></path></svg></div>Device virtualization<div class="heading-after">...</div></h3><div class="heading-children"><div><p>The Layer 3 VPN must define its own control plane - routing tables &amp; addressing structure. The technology enabling this is <strong>VRF - Virtual Routing and Forwarding</strong><br>
One physical router hosts then multiple VRFs, one for each virtual network it supports. </p></div><div><p>VRF enables:</p></div><div><ul>
<li data-line="0">Different </li>
</ul></div></div></div><div class="heading-wrapper"><h3 data-heading="Datapath virtualization" class="heading" id="Datapath_virtualization"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width: 24px; max-width: 100%;"><path d="M3 8L12 17L21 8"></path></svg></div>Datapath virtualization<div class="heading-after">...</div></h3><div class="heading-children"><div><p>Virtualization of the interconnection between devices. </p></div><div><ul>
<li data-line="0">Single-hop: VRF-Lite End-to-End, Easy Virtual Network (EVN) and <strong>802.1Q - VNET tag</strong></li>
<li data-line="1">Multi-hop: VRF-Lite or EVN+GRE, <strong>MPLS VPN</strong></li>
</ul></div><div><p>MPLS would be the best choice for large-scale enterprises that require more than 32 virtual networks per device or require traffic engineering and optimal path selection with fast reroute capabilities along with the ability to provide extremely scalable full-mesh connectivity.</p></div></div></div></div></div><div class="heading-wrapper"><h2 data-heading="VRF" class="heading" id="VRF"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width: 24px; max-width: 100%;"><path d="M3 8L12 17L21 8"></path></svg></div>VRF<div class="heading-after">...</div></h2><div class="heading-children"><div><p>To configure a VRF for customer A: <code>ISP(config)# **ip vrf CUST-A**</code><br>
To assign an interface to a VRF: </p></div><div><pre><code>ISP(config)# interface Ethernet 0/0 
ISP(config-if)# ip vrf forwarding CUST-A
% Interface Ethernet0/0 IPv4 disabled and address(es) removed due to enabling VRF CUST-A
</code><button class="copy-code-button">Copy</button></pre></div><div><p>To verify the configuration:</p></div><div><ul>
<li data-line="0"><code>show ip vrf</code></li>
<li data-line="1"><code>show ip vrf interfaces</code></li>
<li data-line="2"><code>show ip route vrf CUST-A</code><br>
To configure OSPF in a specific VRF:</li>
</ul></div><div><pre><code>ISP(config)# router ospf 100 vrf CUST-A 
ISP(config-router)# router-id 0.0.0.100 
ISP(config-router)# network 172.16.1.16 0.0.0.15 area 0
</code><button class="copy-code-button">Copy</button></pre></div><div><p>To verify the VRF-specific OSPF:</p></div><div><ul>
<li data-line="0"><code>show ip protocols vrf CUST-A</code></li>
<li data-line="1"><code>show ip route vrf CUST-A ospf</code></li>
<li data-line="2"><code>ping vrf CUST-A 10.0.1.33</code></li>
</ul></div></div></div><div class="heading-wrapper"><h2 data-heading="GRE" class="heading" id="GRE"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width: 24px; max-width: 100%;"><path d="M3 8L12 17L21 8"></path></svg></div>GRE<div class="heading-after">...</div></h2><div class="heading-children"><div><p>Generic Routing Encapsulation (GRE) is a tunneling protocol that allows to encapsulate any of the multiple supported Layer 3 protocols such as IP, IPX, and AppleTalk into an IP packet. It also enables the use of multicast routing protocols across the tunnel.<br>
GRE does not encrypt traffic or use any strong security measures to protect the traffic.<br>
The underlay IP header will show IP protocol 47 as the protocol of the next layer</p></div><div><p>GRE adds a 20-byte IP header (also known as Delivery Header) and a 4-byte GRE header<br>
--&gt; 24 bytes of additional overhead for tunneled packets.<br>
You then need to either lower the MTU of your endpoints, or raise the MTU of the transport network.</p></div><div><p><span alt="Pasted image 20230823170124.png" src="assets/pasted-image-20230823170124.png" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20230823170124.png" src="assets/pasted-image-20230823170124.png"></span></p></div><div class="heading-wrapper"><h3 data-heading="Implementing GRE" class="heading" id="Implementing_GRE"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width: 24px; max-width: 100%;"><path d="M3 8L12 17L21 8"></path></svg></div>Implementing GRE<div class="heading-after">...</div></h3><div class="heading-children"><div><p>Create a tunnel interface.<br>
<code>Router(config)# interface tunnel tunnel-id</code><br>
Configure the GRE tunnel mode. This mode is a default tunnel mode, so it is not necessary to configure it.<br>
<code>Router(config-if)# tunnel mode gre ip</code><br>
Configure an IP address for the tunnel interface<br>
<code>Router(config-if)# ip address &lt;ip-address&gt; &lt;mask&gt;</code><br>
Specify the tunnel source IP address.<br>
<code>Router(config-if)# tunnel source &lt;ip-address&gt; Specify the tunnel destination IP address. </code>Router(config-if)# tunnel destination `</p></div><div><p>The minimum GRE tunnel configuration requires the specification of the tunnel source address and destination address. You must also configure an IP subnet to provide IP connectivity across the tunnel link.</p></div></div></div><div class="heading-wrapper"><h3 data-heading="Verify a GRE Tunnel" class="heading" id="Verify_a_GRE_Tunnel"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width: 24px; max-width: 100%;"><path d="M3 8L12 17L21 8"></path></svg></div>Verify a GRE Tunnel<div class="heading-after">...</div></h3><div class="heading-children"><div><p>To verify a GRE tunnel, perform the following actions:</p></div><div><ul>
<li data-line="0">Determine whether the tunnel interface is up or down.<br>
<code>Router# show ip interface brief tunnel &lt;tunnel-id&gt;</code></li>
<li data-line="2">Verify the state of the GRE tunnel.<br>
<code>Router# show interface tunnel &lt;tunnel-id&gt;</code></li>
<li data-line="4">Verify that the tunnel network is seen as directly connected in the routing table.<br>
<code>Router# show ip route</code></li>
</ul></div></div></div></div></div><div class="heading-wrapper"><h2 data-heading="IPSec" class="heading" id="IPSec"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width: 24px; max-width: 100%;"><path d="M3 8L12 17L21 8"></path></svg></div>IPSec<div class="heading-after">...</div></h2><div class="heading-children"><div><p>2 types of header:</p></div><div><ul>
<li data-line="0">Authentication Header: IP Protocol 51, Authentication + integrity but no encryption </li>
<li data-line="1">Encapsulation Security Payload (ESP): everything<br>
2 modes of operation:<br>
- transport: the original packet IP header is not protected, the ESP header is after it<br>
- tunnel mode: the original packet is hidden behind the ESP header</li>
</ul></div><div><p>Two endpoints must agree on a transport set (hashing and encryption algorithms) to communicate. </p></div><div class="heading-wrapper"><h3 data-heading="IKE" class="heading" id="IKE"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width: 24px; max-width: 100%;"><path d="M3 8L12 17L21 8"></path></svg></div>IKE<div class="heading-after">...</div></h3><div class="heading-children"><div><p>The IKE (Internet Key Exchange) establishment process allows endpoints to negotiate the transport set, and establish Security Associations (SA).<br>
IKE implements the ISAKMP (Internet Security Association and Key Management Protocol) standard </p></div><div><p><strong>IKEv1</strong><br>
- Phase 1: Build the control plane tunnel <em>24H</em><br>
Exchange and negotiate HAGLE (Hash Auth Group (DH) Lifetime Encryption)<br>
2 modes: Main (9 messages) or aggressive (6 messages)<br>
- Phase 2: Build the data plane tunnel (= IPSec tunnel) <em>12H</em><br>
Often reuse the session keys of the phase 1 tunnel, unless PFS (Perfect Forward Secrecy) is configured<br>
<br>
<strong>IKEv2</strong><br>
- Less messages during the process: Phase 1 and phase 2 at the same time<br>
- Better encryption algorithms<br>
- Not backwards compatible</p></div></div></div></div></div><div class="heading-wrapper"><h2 data-heading="VPN Types" class="heading" id="VPN_Types"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width: 24px; max-width: 100%;"><path d="M3 8L12 17L21 8"></path></svg></div>VPN Types<div class="heading-after">...</div></h2><div class="heading-children"><div class="heading-wrapper"><h3 data-heading="Site to site" class="heading" id="Site_to_site"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width: 24px; max-width: 100%;"><path d="M3 8L12 17L21 8"></path></svg></div>Site to site<div class="heading-after">...</div></h3><div class="heading-children"><div><p>Easy and multivendor. Lack Routing, multicast and scaling.</p></div></div></div><div class="heading-wrapper"><h3 data-heading="DMVPN - Dynamic multipoint VPN" class="heading" id="DMVPN_-_Dynamic_multipoint_VPN"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width: 24px; max-width: 100%;"><path d="M3 8L12 17L21 8"></path></svg></div>DMVPN - Dynamic multipoint VPN<div class="heading-after">...</div></h3><div class="heading-children"><div><p><em>Cisco proprietary</em><br>
A signaling tunnel is always active in a hub-and-spoke topology<br>
This signaling layer allows to create dynamically data-plane VPNs, including spoke-to-spoke tunnels, only when needed.<br>
using NHRP (Next Hop Resolution Protocol)<br>
Dynamic routing protocols are supported</p></div></div></div><div class="heading-wrapper"><h3 data-heading="FlexVPN" class="heading" id="FlexVPN"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width: 24px; max-width: 100%;"><path d="M3 8L12 17L21 8"></path></svg></div>FlexVPN<div class="heading-after">...</div></h3><div class="heading-children"><div><p>DMVPN+, still NHRP<br>
IKEv2 only</p></div></div></div><div class="heading-wrapper"><h3 data-heading="GET VPN - Group Encrypted Transport" class="heading" id="GET_VPN_-_Group_Encrypted_Transport"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width: 24px; max-width: 100%;"><path d="M3 8L12 17L21 8"></path></svg></div>GET VPN - Group Encrypted Transport<div class="heading-after">...</div></h3><div class="heading-children"><div><p>To use over an unencrypted MPLS, while preserving the original IP Header to keep its QoS.<br>
scalable site-to-site VPN model that operates in a full mesh<br>
The primary components are the key server, the group members, and the GDOI protocol.<br>
Can use IKEv2 for key exchange</p></div></div></div></div></div><div class="heading-wrapper"><h2 data-heading="IPv6 and 6to4 tunnels" class="heading" id="IPv6_and_6to4_tunnels"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width: 24px; max-width: 100%;"><path d="M3 8L12 17L21 8"></path></svg></div>IPv6 and 6to4 tunnels<div class="heading-after">...</div></h2><div class="heading-children"><div><ul>
<li data-line="0"><code>tunnel mode ipv6ip 6to4</code> - creates a 6to4 tunnel</li>
<li data-line="1"><code>tunnel mode ipv6ip</code> = creates a manual IPv6 tunnel</li>
<li data-line="2"><code>tunnel mode gre ipv6</code> creates a GRE tunnel</li>
<li data-line="3"><code>tunnel mode ipv6ip auto-tunnel</code> creates an IPv4-compatible tunnel</li>
<li data-line="4"><code>tunnel mode ipv6ip isatap</code> creates an Intra-Site Automatic Tunnel Addressing Protocol (ISATAP) tunnel</li>
</ul></div><div><p>6to4 tunnels should use the <code>2002::/16</code> prefix to define a route for all IPv6 traffic to go through that tunnel.</p></div><div class="mod-footer"></div></div></div></div></div></div><div class="sidebar-right sidebar"><div class="sidebar-gutter"><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-container"><div class="sidebar-sizer"><div class="sidebar-content-positioner"><div class="sidebar-content"><div class="tree-container outline-tree" data-depth="0"><div class="tree-header"><span class="sidebar-section-header">Table Of Contents</span><button class="clickable-icon collapse-tree-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-scroll-area"><div class="tree-item" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#2.2_-_Data_path_virtualization"><span class="tree-item-title"><p>2.2 - Data path virtualization</p></span></a></div><div class="tree-item-children"><div class="tree-item mod-collapsible" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Path_Isolation"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>Path Isolation</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Device_virtualization"><span class="tree-item-title"><p>Device virtualization</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Datapath_virtualization"><span class="tree-item-title"><p>Datapath virtualization</p></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#VRF"><span class="tree-item-title"><p>VRF</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#GRE"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>GRE</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Implementing_GRE"><span class="tree-item-title"><p>Implementing GRE</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Verify_a_GRE_Tunnel"><span class="tree-item-title"><p>Verify a GRE Tunnel</p></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#IPSec"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>IPSec</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#IKE"><span class="tree-item-title"><p>IKE</p></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#VPN_Types"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>VPN Types</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Site_to_site"><span class="tree-item-title"><p>Site to site</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#DMVPN_-_Dynamic_multipoint_VPN"><span class="tree-item-title"><p>DMVPN - Dynamic multipoint VPN</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#FlexVPN"><span class="tree-item-title"><p>FlexVPN</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#GET_VPN_-_Group_Encrypted_Transport"><span class="tree-item-title"><p>GET VPN - Group Encrypted Transport</p></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#IPv6_and_6to4_tunnels"><span class="tree-item-title"><p>IPv6 and 6to4 tunnels</p></span></a></div><div class="tree-item-children"></div></div></div></div></div></div></div></div></div></div></div></div></body></html>